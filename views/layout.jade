doctype html
html(lang="en")
    head
        title= title
        //indicate that our site is mobile optimized
        meta(name='viewport', content='width=device-width, initial-scale=1.0')
        //reference our site-specific css
        link(rel='stylesheet', href='/stylesheets/style.css')
        //add bootstrap dependencies from CDNjs. Using a CDN to distribute these files puts less pressure
        //on our web server and will be delivered faster to the client than our own server.
        link(rel='stylesheet', href='//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap-theme.min.css')
        link(rel='stylesheet', href='//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap.min.css')
        link(rel='stylesheet', href='//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.2/css/bootstrap-select.min.css')
    body
        // Wrap all page content here
        div(id="wrap")
            block navBar
                div(class="navbar navbar-default navbar-static-top" role="navigation")
                    div(class="container")
                        div(class="navbar-header")
                            button(type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse")
                                span(class="sr-only") Toggle navigation
                                span(class="icon-bar")
                                span(class="icon-bar")
                                span(class="icon-bar")
                            a(class="navbar-brand" href="/") Home
                        div(class="navbar-collapse collapse")
                            ul(class="nav navbar-nav")
                                - var obj = { 'upload':'Upload', 'align':'Align', 'process':'Process', 'about':'About'}
                                    - each val, key in obj
                                        - if (id == key)
                                            li.active
                                                a(href='#{key}') #{val}
                                        - else
                                            li
                                                a(href='#{key}') #{val}
                            ul(class="nav navbar-nav navbar-right")
                                if user
                                    li.active
                                        a(class="navbar-brand", href='/#')= 'Hi,' + user.username
                                    li
                                        a(href='/logout') Logout
                                else
                                    li
                                        a(href='/login') Login
                                    li
                                        a(href='/signup') Signup
            //These are populated by extension views
            block content
            // alert type: warning error success info
            -if(flash)
                div(class="alert alert-dismissible alert-" + flash.type)
                    button(type="button" class="close" data-dismiss="alert" aria-hidden="true") &times;
                    p= flash.message
        // footer was push down
        div(id="footer")
            .container
                p(class="text-muted credit") &copy;&nbsp; 2014 &nbsp; Site maintained by wangq.
        script(src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js')
        script(src='//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/bootstrap.min.js')
        script(src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.1.47/jquery.form-validator.min.js")
        script(src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.2/js/bootstrap-select.min.js")
        script(type='text/javascript').
            $.validate({
                modules : 'date, security, file'
            });
            $('.selectpicker').selectpicker();
